<UserControl x:Class="AoE4KeybindsOverlay.Views.Controls.MouseControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:AoE4KeybindsOverlay.Views.Controls"
             mc:Ignorable="d"
             d:DesignWidth="200" d:DesignHeight="300">

    <!-- The mouse is rendered as a stylized shape with overlaid button regions.
         Uses the same Viewbox + Canvas + KeyControl approach as the keyboard.
         Scale factor: 50 pixels per logical unit. -->

    <Viewbox Stretch="Uniform">
        <Grid Width="{Binding CanvasWidth, RelativeSource={RelativeSource AncestorType=local:MouseControl}}"
              Height="{Binding CanvasHeight, RelativeSource={RelativeSource AncestorType=local:MouseControl}}">

            <!-- Mouse body outline -->
            <Border CornerRadius="30,30,50,50"
                    BorderBrush="#3A3A5A"
                    BorderThickness="2"
                    Background="#221A1A2E"
                    Margin="5" />

            <!-- Divider line between LMB and RMB -->
            <Line X1="{Binding DividerX, RelativeSource={RelativeSource AncestorType=local:MouseControl}}"
                  Y1="5"
                  X2="{Binding DividerX, RelativeSource={RelativeSource AncestorType=local:MouseControl}}"
                  Y2="150"
                  Stroke="#3A3A5A"
                  StrokeThickness="1" />

            <!-- Mouse button regions -->
            <ItemsControl ItemsSource="{Binding ButtonViewModels, RelativeSource={RelativeSource AncestorType=local:MouseControl}}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas Width="{Binding CanvasWidth, RelativeSource={RelativeSource AncestorType=local:MouseControl}}"
                                Height="{Binding CanvasHeight, RelativeSource={RelativeSource AncestorType=local:MouseControl}}" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemContainerStyle>
                    <Style TargetType="ContentPresenter">
                        <Setter Property="Canvas.Left" Value="{Binding CanvasX}" />
                        <Setter Property="Canvas.Top" Value="{Binding CanvasY}" />
                    </Style>
                </ItemsControl.ItemContainerStyle>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <local:KeyControl KeyId="{Binding KeyId}"
                                          KeyLabel="{Binding Label}"
                                          KeyWidth="{Binding PixelWidth}"
                                          KeyHeight="{Binding PixelHeight}"
                                          IsPressed="{Binding IsPressed}"
                                          HighlightBrush="{Binding HighlightBrush}"
                                          HasHighlight="{Binding HasHighlight}"
                                          HeatmapIntensity="{Binding HeatmapIntensity}"
                                          IsHeatmapMode="{Binding IsHeatmapMode}"
                                          BindingText="{Binding BindingText}"
                                          IsDimmed="{Binding IsDimmed}"
                                          KeyFontSize="{Binding KeyFontSize, RelativeSource={RelativeSource AncestorType=local:MouseControl}}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
    </Viewbox>

</UserControl>
